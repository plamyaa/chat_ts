{"mappings":"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","sources":["modules/utils.ts","node_modules/js-cookie/dist/js.cookie.js","modules/consts.ts","modules/socket.ts","modules/view.ts","modules/mainInterface.ts","modules/main.ts","modules/modalInterface.ts","modules/requests.ts"],"sourcesContent":["import Cookies from \"js-cookie\";\n\nexport function differentEmail(messageEmail : string) : boolean {\n    return (messageEmail != Cookies.get(\"email\")) ? true : false;\n}\n\nexport function configTime(date : Date){\n    return String(date).slice(16, 21);\n}\n\nexport function tryStringify(obj: object) : string | null {\n    try {\n        return JSON.stringify(obj);\n    }\n    catch (error : any) {\n        alert(\"Error \" + error.name + ':' + error.message + '\\n' + error.stack);\n        return null;\n    }\n}\n\nexport function deleteCookie() : void {\n    Cookies.remove(\"myName\");\n    Cookies.remove(\"email\");\n    Cookies.remove(\"token\");\n}\n\nexport function tryParse(obj : string) : string | undefined {\n    try {\n        return JSON.parse(obj);\n    }\n    catch (error : any) {\n        alert(\"Error \" + error.name + ':' + error.message + '\\n' + error.stack);\n        return undefined;\n    }\n}","/*! js-cookie v3.0.1 | MIT */\n;\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = global || self, (function () {\n    var current = global.Cookies;\n    var exports = global.Cookies = factory();\n    exports.noConflict = function () { global.Cookies = current; return exports; };\n  }()));\n}(this, (function () { 'use strict';\n\n  /* eslint-disable no-var */\n  function assign (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        target[key] = source[key];\n      }\n    }\n    return target\n  }\n  /* eslint-enable no-var */\n\n  /* eslint-disable no-var */\n  var defaultConverter = {\n    read: function (value) {\n      if (value[0] === '\"') {\n        value = value.slice(1, -1);\n      }\n      return value.replace(/(%[\\dA-F]{2})+/gi, decodeURIComponent)\n    },\n    write: function (value) {\n      return encodeURIComponent(value).replace(\n        /%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,\n        decodeURIComponent\n      )\n    }\n  };\n  /* eslint-enable no-var */\n\n  /* eslint-disable no-var */\n\n  function init (converter, defaultAttributes) {\n    function set (key, value, attributes) {\n      if (typeof document === 'undefined') {\n        return\n      }\n\n      attributes = assign({}, defaultAttributes, attributes);\n\n      if (typeof attributes.expires === 'number') {\n        attributes.expires = new Date(Date.now() + attributes.expires * 864e5);\n      }\n      if (attributes.expires) {\n        attributes.expires = attributes.expires.toUTCString();\n      }\n\n      key = encodeURIComponent(key)\n        .replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent)\n        .replace(/[()]/g, escape);\n\n      var stringifiedAttributes = '';\n      for (var attributeName in attributes) {\n        if (!attributes[attributeName]) {\n          continue\n        }\n\n        stringifiedAttributes += '; ' + attributeName;\n\n        if (attributes[attributeName] === true) {\n          continue\n        }\n\n        // Considers RFC 6265 section 5.2:\n        // ...\n        // 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\n        //     character:\n        // Consume the characters of the unparsed-attributes up to,\n        // not including, the first %x3B (\";\") character.\n        // ...\n        stringifiedAttributes += '=' + attributes[attributeName].split(';')[0];\n      }\n\n      return (document.cookie =\n        key + '=' + converter.write(value, key) + stringifiedAttributes)\n    }\n\n    function get (key) {\n      if (typeof document === 'undefined' || (arguments.length && !key)) {\n        return\n      }\n\n      // To prevent the for loop in the first place assign an empty array\n      // in case there are no cookies at all.\n      var cookies = document.cookie ? document.cookie.split('; ') : [];\n      var jar = {};\n      for (var i = 0; i < cookies.length; i++) {\n        var parts = cookies[i].split('=');\n        var value = parts.slice(1).join('=');\n\n        try {\n          var foundKey = decodeURIComponent(parts[0]);\n          jar[foundKey] = converter.read(value, foundKey);\n\n          if (key === foundKey) {\n            break\n          }\n        } catch (e) {}\n      }\n\n      return key ? jar[key] : jar\n    }\n\n    return Object.create(\n      {\n        set: set,\n        get: get,\n        remove: function (key, attributes) {\n          set(\n            key,\n            '',\n            assign({}, attributes, {\n              expires: -1\n            })\n          );\n        },\n        withAttributes: function (attributes) {\n          return init(this.converter, assign({}, this.attributes, attributes))\n        },\n        withConverter: function (converter) {\n          return init(assign({}, this.converter, converter), this.attributes)\n        }\n      },\n      {\n        attributes: { value: Object.freeze(defaultAttributes) },\n        converter: { value: Object.freeze(converter) }\n      }\n    )\n  }\n\n  var api = init(defaultConverter, { path: '/' });\n  /* eslint-enable no-var */\n\n  return api;\n\n})));\n","export const grey : string = \"#535353\";\nexport const white : string = \"#FFF\";\n\nexport const UI = {\n    CONTAINER : document.querySelector(\".container-shape\") as HTMLBodyElement,\n    SETTINGS_BUTTON : document.querySelector(\".buttons-above__settings\") as HTMLButtonElement,\n    EXIT_BUTTON : document.querySelector(\".buttons-above__exit\") as HTMLButtonElement,\n    ENTER_CODE : document.querySelector(\".modal-autorization__code\") as HTMLLinkElement,\n    SEND_TEXT : document.querySelector(\".message-below__input\") as HTMLInputElement,\n    SEND_BUTTON : document.querySelector(\".message-below__button\") as HTMLButtonElement,\n    CHAT : document.querySelector(\".chat\") as HTMLDivElement,\n    CHAT_WINDOW : document.querySelector(\".chat-window\") as HTMLDivElement,\n    TEMPLATE : document.querySelector(\"#template-message\") as HTMLTemplateElement,\n    MODAL : {\n        SETTINGS : {\n            TEXT : document.querySelector(\".modal-settings__input\") as HTMLInputElement,\n            SEND_BUTTON : document.querySelector(\".modal-settings__button\") as HTMLButtonElement,\n            EXIT : document.querySelector(\".modal-settings__exit\") as HTMLButtonElement,\n        },\n        AUTORIZATION : {\n            TEXT : document.querySelector(\".modal-autorization__input\") as HTMLInputElement,\n            SEND_BUTTON : document.querySelector(\".modal-autorization__button\") as HTMLButtonElement,\n            EXIT : document.querySelector(\".modal-autorization__exit\") as HTMLButtonElement,\n        },\n        CONFIRMATION : {\n            TEXT : document.querySelector(\".modal-confirmation__input\") as HTMLInputElement,\n            SEND_BUTTON : document.querySelector(\".modal-confirmation__button\") as HTMLButtonElement,\n            EXIT : document.querySelector(\".modal-confirmation__exit\") as HTMLButtonElement,\n        }\n    },\n    MODAL_SETTINGS : document.querySelector(\".modal-settings\") as HTMLBodyElement,\n    MODAL_AUTORIZATION : document.querySelector(\".modal-autorization\") as HTMLBodyElement,\n    MODAL_CONFIRMATION : document.querySelector(\".modal-confirmation\") as HTMLBodyElement,\n    USER_API : \"https://mighty-cove-31255.herokuapp.com/api/user\" as string,\n    MESSAGES_API : \"https://mighty-cove-31255.herokuapp.com/api/messages\" as string,\n    SERVER_API : \"ws://mighty-cove-31255.herokuapp.com/websockets?\" as string,\n}","import Cookies from 'js-cookie';\nimport { createMessage } from './view';\nimport { UI } from './consts';\nimport { tryStringify, tryParse } from './utils';\n\ninterface SocketInterface {\n    socket : WebSocket;\n    token : string | undefined;\n    sendMessage(message : string) : void ;\n}\n\nexport class Socket implements SocketInterface{\n    socket : WebSocket;\n    token : string | undefined;\n\n    constructor (){\n        this.token = Cookies.get(\"token\");\n        this.socket = new WebSocket(`${UI.SERVER_API + this.token!}`);\n    }\n    public listener () : void {\n        this.socket.addEventListener(\"message\", (event : any) => this.addMessage(event));\n        this.socket.addEventListener(\"error\", ((error : any) => alert(error.message)));\n        this.socket.addEventListener(\"close\", new Socket().listener);\n    }\n    public sendMessage(message : string) : void {\n        this.socket.send(tryStringify({ text: `${message}` })!);\n    }\n    private addMessage(event : any) : void {\n        const messageData : string | undefined = tryParse(event.data);\n        UI.CHAT_WINDOW.append(createMessage(messageData!));\n        UI.CHAT.scrollTop += 100000;\n    }\n\n}","\nimport Cookies from \"js-cookie\";\nimport { configTime, differentEmail } from \"./utils\";\nimport { UI } from \"./consts\";\nimport { tryParse } from \"./utils\";\nimport { Socket } from \"./socket\"\n\ninterface dataObject {\n    formValue : string, \n    name : string, \n    date : Date,\n    email : string,\n}\n\nexport function createDataObject(messageData : any) : dataObject {\n    const data : dataObject = {\n        formValue : messageData.text, \n        name :  messageData.user.name, \n        date :  new Date(messageData.createdAt),\n        email :  messageData.user.email,\n    }\n    return data;\n}\n\nexport function createMessage (messageData : Object) : HTMLDivElement {\n    const data : dataObject = createDataObject(messageData);\n    const message: HTMLDivElement = document.createElement(\"div\");\n    message.classList.add(\"chat-window__message\");\n    if (differentEmail(data.email))\n        message.classList.add(\"message-he\");\n    else\n        message.classList.add(\"message-my\");\n    message.append(UI.TEMPLATE.content.cloneNode(true));\n    message.firstElementChild!.textContent = data.name + ': ' + data.formValue;\n    message.lastElementChild!.textContent = configTime(data.date);\n    return message;\n}\n\nexport function showMessagesHistory(len : number) {\n    const template : string | null = localStorage.getItem(\"messagesHistory\");\n    const messages : any = tryParse(template!);\n    const lenOfMsg : number = messages.length - 1;\n    for (let i : number = lenOfMsg - len; i > lenOfMsg - len - 20; i--) {\n        let messageWindow = createMessage(messages[i]);\n        UI.CHAT_WINDOW.prepend(messageWindow); \n        UI.CHAT.scrollTop += messageWindow.clientHeight - 48;\n    }\n}\n\nexport function checkAutoriztion() : boolean {\n    const email : string | undefined = Cookies.get(\"email\");\n    const token : string | undefined = Cookies.get(\"token\");\n    const name : string | undefined = Cookies.get(\"myName\");\n    if (!email) {\n        alert(\"Пожалуйста авторизуйтесь\");\n        return false;\n    }\n    else if (!token) {\n        alert(\"Пожалуйста введите токен\");\n        return false;\n    }\n    else if (!name) {\n        alert(\"Пожалуйста введите имя в настройках\");\n        return false;\n    }\n    const socket = new Socket();\n    socket.listener();\n    return true;\n}\n\nexport function isAutorized() : boolean {\n    const token : string | undefined = Cookies.get(\"token\");\n    if (!token) {\n        UI.EXIT_BUTTON.textContent = \"Войти\";\n        return false;\n    }\n    else {\n        UI.EXIT_BUTTON.textContent = \"Выйти\";\n        return true;\n    }\n} \n","import { UI, grey, white } from \"./consts\";\nimport { showMessagesHistory } from \"./view\";\nimport { checkAutoriztion } from \"./view\";\nimport { Socket } from \"./socket\";\nimport { isAutorized } from \"./view\";\n\n\nexport class Chat {\n    input : HTMLInputElement;\n    send : HTMLButtonElement;\n    chatScroll : HTMLDivElement;\n    chat : HTMLDivElement;\n    \n    constructor () {\n        this.input = UI.SEND_TEXT;\n        this.send = UI.SEND_BUTTON;\n        this.chatScroll = UI.CHAT;\n        this.chat = UI.CHAT_WINDOW;\n    }\n    public listener() {\n        isAutorized();\n        const socket = new Socket();\n        this.send.addEventListener(\"click\", () => {\n            if (UI.SEND_TEXT.value && checkAutoriztion()) {\n                socket.sendMessage(UI.SEND_TEXT.value);\n            }\n            UI.SEND_TEXT.value = \"\";\n        });\n\n        let counter : number = 0;\n        this.chatScroll.addEventListener(\"scroll\", () => {\n            if (UI.CHAT.scrollTop === 0) {\n                counter++;\n                showMessagesHistory(20 * counter);\n            }\n        });\n    }\n    public showModal (show : HTMLBodyElement) : void {\n        UI.CONTAINER.style.display = \"none\";\n        show.style.display = \"block\";\n        document.body.style.background = grey;\n    }\n    public hideModal (hide : HTMLBodyElement) : void {\n        UI.CONTAINER.style.display = \"flex\";\n        hide.style.display = \"none\";\n        document.body.style.background = white;\n    }\n        \n}\n\n","import { isAutorized}  from \"./view\";\nimport { Socket } from \"./socket\";\nimport { receiveMessages } from \"./requests\";\nimport { Autorization, Settings, Confirmation} from \"./modalInterface\"\nimport { Chat } from \"./mainInterface\";\n\nconst confirmation = new Confirmation();\nconst settings = new Settings();\nconst autorization = new Autorization();\nconst chat = new Chat();\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n    chat.listener();\n    autorization.listener();\n    settings.listener();\n    confirmation.listener();\n    receiveMessages();\n    if (isAutorized()) {\n        const socket = new Socket();\n        socket.listener();\n    }\n})\n","import { isAutorized} from \"./view\";\nimport { UI } from \"./consts\";\nimport { deleteCookie } from \"./utils\";\nimport Cookies from \"js-cookie\";\nimport {sendEmail} from \"./requests\"\nimport { Chat } from \"./mainInterface\";\nimport { getResponse } from \"./requests\";\n\n\nexport class Autorization {\n    mainButton: HTMLButtonElement;\n    window : HTMLBodyElement;\n    sendButton : HTMLButtonElement;\n    exitButton : HTMLButtonElement;\n    toConfirmation : HTMLLinkElement;\n    input : HTMLInputElement;\n\n    constructor () {\n        this.mainButton = UI.EXIT_BUTTON;\n        this.window = UI.MODAL_AUTORIZATION;\n        this.sendButton = UI.MODAL.AUTORIZATION.SEND_BUTTON;\n        this.exitButton = UI.MODAL.AUTORIZATION.EXIT;\n        this.toConfirmation = UI.ENTER_CODE;\n        this.input = UI.MODAL.AUTORIZATION.TEXT\n    }\n   \n    public listener () {\n        const chat = new Chat();\n        this.sendButton.addEventListener(\"click\", () => {\n            if (UI.MODAL.AUTORIZATION.TEXT.value.includes(\"@\")){\n                const email : string = UI.MODAL.AUTORIZATION.TEXT.value;\n                Cookies.set(\"email\", email)\n                chat.hideModal(UI.MODAL_AUTORIZATION);\n                chat.showModal(UI.MODAL_CONFIRMATION);\n                sendEmail(email);\n                UI.MODAL.AUTORIZATION.TEXT.value = \"\";\n            }\n            else {\n                alert(\"Введите корректный email\");\n            }\n        });\n\n        this.mainButton.addEventListener(\"click\", () => {\n            if (isAutorized()) {\n                deleteCookie();\n                this.mainButton.textContent = \"Войти\";\n            }\n            chat.showModal(UI.MODAL_AUTORIZATION);\n        });\n\n        this.exitButton.addEventListener(\"click\", () => chat.hideModal(UI.MODAL_AUTORIZATION));\n\n        this.toConfirmation.addEventListener(\"click\",  () => {\n            chat.hideModal(UI.MODAL_AUTORIZATION);\n            chat.showModal(UI.MODAL_CONFIRMATION);\n        });\n    }\n}\n\nexport class Confirmation {\n    window : HTMLBodyElement;\n    sendButton : HTMLButtonElement;\n    exitButton : HTMLButtonElement;\n    input : HTMLInputElement;\n    constructor () {\n        this.window = UI.MODAL_CONFIRMATION;\n        this.sendButton = UI.MODAL.CONFIRMATION.SEND_BUTTON;\n        this.exitButton = UI.MODAL.CONFIRMATION.EXIT;\n        this.input = UI.MODAL.CONFIRMATION.TEXT;\n    }\n    public listener () {\n        const chat = new Chat();\n        this.sendButton.addEventListener(\"click\", () => {\n            if (UI.MODAL.CONFIRMATION.TEXT.value) {\n                const token : string = UI.MODAL.CONFIRMATION.TEXT.value;\n                Cookies.set(\"token\", token);\n                chat.hideModal(UI.MODAL_CONFIRMATION);\n                chat.showModal(UI.MODAL_SETTINGS);\n            }\n            else {\n                alert(\"Введите токен\");\n            }\n            UI.MODAL.CONFIRMATION.TEXT.value = \"\";\n        });\n        this.exitButton.addEventListener(\"click\", () => chat.hideModal(UI.MODAL_CONFIRMATION));\n    }\n}\n\nexport class Settings {\n    mainButton: HTMLButtonElement;\n    window : HTMLBodyElement;\n    sendButton : HTMLButtonElement;\n    exitButton : HTMLButtonElement;\n    input : HTMLInputElement;\n    constructor() {\n        this.mainButton = UI.SETTINGS_BUTTON;\n        this.window = UI.MODAL_SETTINGS;\n        this.sendButton = UI.MODAL.SETTINGS.SEND_BUTTON;\n        this.exitButton = UI.MODAL.SETTINGS.EXIT;\n        this.input = UI.MODAL.SETTINGS.TEXT;\n    }\n    public listener() {\n        const chat = new Chat();\n        UI.MODAL.SETTINGS.SEND_BUTTON.addEventListener(\"click\", () => {\n            if (UI.MODAL.SETTINGS.TEXT.value) {\n                const name : string = UI.MODAL.SETTINGS.TEXT.value;\n                Cookies.set(\"myName\", name);\n                chat.hideModal(UI.MODAL_SETTINGS);\n                getResponse(name);\n            }\n            else {\n                alert(\"Введите имя\");\n            }\n            UI.MODAL.SETTINGS.TEXT.value = \"\";\n        });\n        this.mainButton.addEventListener(\"click\", () => chat.showModal(UI.MODAL_SETTINGS));\n        this.exitButton.addEventListener(\"click\", () => chat.hideModal(UI.MODAL_SETTINGS));\n    }\n}\n","import Cookies from 'js-cookie';\nimport { showMessagesHistory } from './view';\nimport { UI } from \"./consts\"\nimport { tryStringify } from './utils';\n\nexport async function getResponse (myName : string) : Promise<void> {\n    const json : string | null = tryStringify({ name: myName });\n    const token : string | undefined = Cookies.get(\"token\");\n    try {\n        fetch(UI.USER_API, {\n            method: 'PATCH',\n            headers: {\n                'Authorization': `Bearer ${token}`,\n                'Content-Type': 'application/json;charset=utf-8'\n            },\n            body: json,\n        });\n    }\n    catch (error : any) {\n        alert(\"Error \" + error.name + ':' + error.message + '\\n' + error.stack);\n    }\n}\n\nexport async function sendEmail(eMail : string) : Promise<void> {\n    const json : string | null = tryStringify({ email: eMail });\n    try {\n        fetch(UI.USER_API, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json;charset=utf-8'\n            },\n            body: json,\n        });\n    }\n    catch (error : any) {\n        alert(\"Error \" + error.name + ':' + error.message + '\\n' + error.stack);\n    }\n};\n\nexport async function receiveMessages() : Promise<void> {\n    try {\n        const response : Response = await fetch(UI.MESSAGES_API, {\n            method: 'GET',\n            headers: {\n                'Content-Type': 'application/json;'\n            }\n        });\n        const json : any =  await response.json();\n        const messagesHistory : string | null = tryStringify(json.messages);\n        localStorage.setItem(\"messagesHistory\", `${messagesHistory}`);\n        showMessagesHistory(0);\n        UI.CHAT.scrollTop += 10000;\n    }\n    catch(error : any) {\n        alert(\"Error \" + error.name + ':' + error.message + '\\n' + error.stack);\n    }\n} "],"names":["$41988313967db223$export$cef5c86d8ac84400","obj","JSON","stringify","error","alert","name","message","stack","$41988313967db223$export$468ff95b83d315e5","parse","$666bc8f27f76152a$exports","assign","target","i","arguments","length","source","key","init","converter1","defaultAttributes","set","value","attributes","document","expires","Date","now","toUTCString","encodeURIComponent","replace","decodeURIComponent","escape","stringifiedAttributes","attributeName","split","cookie","write","get","cookies","jar","parts","slice","join","foundKey","read","e","Object","create","remove","withAttributes","this","converter","withConverter","freeze","path","factory","$f2f748da24448b94$export$4b08aed5f1ec6952","CONTAINER","querySelector","SETTINGS_BUTTON","EXIT_BUTTON","ENTER_CODE","SEND_TEXT","SEND_BUTTON","CHAT","CHAT_WINDOW","TEMPLATE","MODAL","SETTINGS","TEXT","EXIT","AUTORIZATION","CONFIRMATION","MODAL_SETTINGS","MODAL_AUTORIZATION","MODAL_CONFIRMATION","USER_API","MESSAGES_API","SERVER_API","$13c9188fae728785$export$4798917dbf149b79","constructor","token","$parcel$interopDefault","socket","WebSocket","listener","addEventListener","event","addMessage","sendMessage","send","text","messageData","data","append","$be87d6e3ad06333a$export$62651879628e0c4c","scrollTop","formValue","user","date","createdAt","email","$be87d6e3ad06333a$export$5441ca21932cfac5","createElement","classList","add","content","cloneNode","firstElementChild","textContent","lastElementChild","String","$be87d6e3ad06333a$export$7406b3cd41808527","len","messages","localStorage","getItem","lenOfMsg","messageWindow","prepend","clientHeight","$be87d6e3ad06333a$export$801ef38e4bccc49","$7cebb02732ba3e99$export$d49dffca20dba6f7","input","chatScroll","chat","$be87d6e3ad06333a$export$9b1072ed0b6e2e51","counter","showModal","show","style","display","body","background","hideModal","hide","$466562b14351ffcb$var$confirmation","window","sendButton","exitButton","$466562b14351ffcb$var$settings","mainButton","async","myName","json","fetch","method","headers","Authorization","$becf98ab0a789c0a$export$fd3c80c00b3490e","$466562b14351ffcb$var$autorization","toConfirmation","includes","eMail","$becf98ab0a789c0a$export$1cea2e25b75a88f2","$466562b14351ffcb$var$chat","response","messagesHistory","setItem","$becf98ab0a789c0a$export$da14a1c628a4ac5c"],"version":3,"file":"index.465beeb3.js.map"}