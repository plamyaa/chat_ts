{"mappings":"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","sources":["modules/utils.ts","node_modules/js-cookie/dist/js.cookie.js","modules/consts.ts","modules/socket.ts","modules/view.ts","modules/mainInterface.ts","modules/main.ts","modules/modalInterface.ts","modules/requests.ts"],"sourcesContent":["import Cookies from \"js-cookie\";\n\nexport function differentEmail(messageEmail : string) : boolean {\n    return (messageEmail != Cookies.get(\"email\")) ? true : false;\n}\n\nexport function configTime(date : Date){\n    return String(date).slice(16, 21);\n}\n\nexport function tryStringify(obj: object) : string | null {\n    try {\n        return JSON.stringify(obj);\n    }\n    catch (error : any) {\n        alert(\"Error \" + error.name + ':' + error.message + '\\n' + error.stack);\n        return null;\n    }\n}\n\nexport function deleteCookie() : void {\n    Cookies.remove(\"myName\");\n    Cookies.remove(\"email\");\n    Cookies.remove(\"token\");\n}\n\nexport function tryParse(obj : string) : string | undefined {\n    try {\n        return JSON.parse(obj);\n    }\n    catch (error : any) {\n        alert(\"Error \" + error.name + ':' + error.message + '\\n' + error.stack);\n        return undefined;\n    }\n}","/*! js-cookie v3.0.1 | MIT */\n;\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = global || self, (function () {\n    var current = global.Cookies;\n    var exports = global.Cookies = factory();\n    exports.noConflict = function () { global.Cookies = current; return exports; };\n  }()));\n}(this, (function () { 'use strict';\n\n  /* eslint-disable no-var */\n  function assign (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        target[key] = source[key];\n      }\n    }\n    return target\n  }\n  /* eslint-enable no-var */\n\n  /* eslint-disable no-var */\n  var defaultConverter = {\n    read: function (value) {\n      if (value[0] === '\"') {\n        value = value.slice(1, -1);\n      }\n      return value.replace(/(%[\\dA-F]{2})+/gi, decodeURIComponent)\n    },\n    write: function (value) {\n      return encodeURIComponent(value).replace(\n        /%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,\n        decodeURIComponent\n      )\n    }\n  };\n  /* eslint-enable no-var */\n\n  /* eslint-disable no-var */\n\n  function init (converter, defaultAttributes) {\n    function set (key, value, attributes) {\n      if (typeof document === 'undefined') {\n        return\n      }\n\n      attributes = assign({}, defaultAttributes, attributes);\n\n      if (typeof attributes.expires === 'number') {\n        attributes.expires = new Date(Date.now() + attributes.expires * 864e5);\n      }\n      if (attributes.expires) {\n        attributes.expires = attributes.expires.toUTCString();\n      }\n\n      key = encodeURIComponent(key)\n        .replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent)\n        .replace(/[()]/g, escape);\n\n      var stringifiedAttributes = '';\n      for (var attributeName in attributes) {\n        if (!attributes[attributeName]) {\n          continue\n        }\n\n        stringifiedAttributes += '; ' + attributeName;\n\n        if (attributes[attributeName] === true) {\n          continue\n        }\n\n        // Considers RFC 6265 section 5.2:\n        // ...\n        // 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\n        //     character:\n        // Consume the characters of the unparsed-attributes up to,\n        // not including, the first %x3B (\";\") character.\n        // ...\n        stringifiedAttributes += '=' + attributes[attributeName].split(';')[0];\n      }\n\n      return (document.cookie =\n        key + '=' + converter.write(value, key) + stringifiedAttributes)\n    }\n\n    function get (key) {\n      if (typeof document === 'undefined' || (arguments.length && !key)) {\n        return\n      }\n\n      // To prevent the for loop in the first place assign an empty array\n      // in case there are no cookies at all.\n      var cookies = document.cookie ? document.cookie.split('; ') : [];\n      var jar = {};\n      for (var i = 0; i < cookies.length; i++) {\n        var parts = cookies[i].split('=');\n        var value = parts.slice(1).join('=');\n\n        try {\n          var foundKey = decodeURIComponent(parts[0]);\n          jar[foundKey] = converter.read(value, foundKey);\n\n          if (key === foundKey) {\n            break\n          }\n        } catch (e) {}\n      }\n\n      return key ? jar[key] : jar\n    }\n\n    return Object.create(\n      {\n        set: set,\n        get: get,\n        remove: function (key, attributes) {\n          set(\n            key,\n            '',\n            assign({}, attributes, {\n              expires: -1\n            })\n          );\n        },\n        withAttributes: function (attributes) {\n          return init(this.converter, assign({}, this.attributes, attributes))\n        },\n        withConverter: function (converter) {\n          return init(assign({}, this.converter, converter), this.attributes)\n        }\n      },\n      {\n        attributes: { value: Object.freeze(defaultAttributes) },\n        converter: { value: Object.freeze(converter) }\n      }\n    )\n  }\n\n  var api = init(defaultConverter, { path: '/' });\n  /* eslint-enable no-var */\n\n  return api;\n\n})));\n","export const grey : string = \"#535353\";\nexport const white : string = \"#FFF\";\n\nexport const UI = {\n    PRELOADER : document.querySelector('.preloader') as HTMLDivElement,\n    CONTAINER : document.querySelector(\".container-shape\") as HTMLBodyElement,\n    SETTINGS_BUTTON : document.querySelector(\".buttons-above__settings\") as HTMLButtonElement,\n    EXIT_BUTTON : document.querySelector(\".buttons-above__exit\") as HTMLButtonElement,\n    ENTER_CODE : document.querySelector(\".modal-autorization__code\") as HTMLLinkElement,\n    SEND_TEXT : document.querySelector(\".message-below__input\") as HTMLInputElement,\n    SEND_BUTTON : document.querySelector(\".message-below__button\") as HTMLButtonElement,\n    CHAT : document.querySelector(\".chat\") as HTMLDivElement,\n    CHAT_WINDOW : document.querySelector(\".chat-window\") as HTMLDivElement,\n    TEMPLATE : document.querySelector(\"#template-message\") as HTMLTemplateElement,\n    MODAL : {\n        SETTINGS : {\n            TEXT : document.querySelector(\".modal-settings__input\") as HTMLInputElement,\n            SEND_BUTTON : document.querySelector(\".modal-settings__button\") as HTMLButtonElement,\n            EXIT : document.querySelector(\".modal-settings__exit\") as HTMLButtonElement,\n        },\n        AUTORIZATION : {\n            TEXT : document.querySelector(\".modal-autorization__input\") as HTMLInputElement,\n            SEND_BUTTON : document.querySelector(\".modal-autorization__button\") as HTMLButtonElement,\n            EXIT : document.querySelector(\".modal-autorization__exit\") as HTMLButtonElement,\n        },\n        CONFIRMATION : {\n            TEXT : document.querySelector(\".modal-confirmation__input\") as HTMLInputElement,\n            SEND_BUTTON : document.querySelector(\".modal-confirmation__button\") as HTMLButtonElement,\n            EXIT : document.querySelector(\".modal-confirmation__exit\") as HTMLButtonElement,\n        }\n    },\n    MODAL_SETTINGS : document.querySelector(\".modal-settings\") as HTMLBodyElement,\n    MODAL_AUTORIZATION : document.querySelector(\".modal-autorization\") as HTMLBodyElement,\n    MODAL_CONFIRMATION : document.querySelector(\".modal-confirmation\") as HTMLBodyElement,\n    USER_API : \"https://mighty-cove-31255.herokuapp.com/api/user\" as string,\n    MESSAGES_API : \"https://mighty-cove-31255.herokuapp.com/api/messages\" as string,\n    SERVER_API : \"wss://mighty-cove-31255.herokuapp.com/websockets?\" as string,\n}","import Cookies from 'js-cookie';\nimport { createMessage } from './view';\nimport { UI } from './consts';\nimport { tryStringify, tryParse } from './utils';\n\ninterface SocketInterface {\n    socket : WebSocket;\n    token : string | undefined;\n    sendMessage(message : string) : void ;\n}\n\nexport class Socket implements SocketInterface{\n    socket : WebSocket;\n    token : string | undefined;\n\n    constructor (){\n        this.token = Cookies.get(\"token\");\n        this.socket = new WebSocket(`${UI.SERVER_API + this.token!}`);\n    }\n    public listener () : void {\n        this.socket.addEventListener(\"message\", (event : any) => this.addMessage(event));\n        this.socket.addEventListener(\"error\", ((error : any) => alert(error.message)));\n        this.socket.addEventListener(\"close\", new Socket().listener);\n    }\n    public sendMessage(message : string) : void {\n        this.socket.send(tryStringify({ text: `${message}` })!);\n    }\n    private addMessage(event : any) : void {\n        const messageData : string | undefined = tryParse(event.data);\n        UI.CHAT_WINDOW.append(createMessage(messageData!));\n        UI.CHAT.scrollTop += 100000;\n    }\n\n}","\nimport Cookies from \"js-cookie\";\nimport { configTime, differentEmail } from \"./utils\";\nimport { UI } from \"./consts\";\nimport { tryParse } from \"./utils\";\nimport { Socket } from \"./socket\"\n\ninterface dataObject {\n    formValue : string, \n    name : string, \n    date : Date,\n    email : string,\n}\n\nexport function createDataObject(messageData : any) : dataObject {\n    const data : dataObject = {\n        formValue : messageData.text, \n        name :  messageData.user.name, \n        date :  new Date(messageData.createdAt),\n        email :  messageData.user.email,\n    }\n    return data;\n}\n\nexport function createMessage (messageData : Object) : HTMLDivElement {\n    const data : dataObject = createDataObject(messageData);\n    const message: HTMLDivElement = document.createElement(\"div\");\n    message.classList.add(\"chat-window__message\");\n    if (differentEmail(data.email))\n        message.classList.add(\"message-he\");\n    else\n        message.classList.add(\"message-my\");\n    message.append(UI.TEMPLATE.content.cloneNode(true));\n    message.firstElementChild!.textContent = data.name + ': ' + data.formValue;\n    message.lastElementChild!.textContent = configTime(data.date);\n    return message;\n}\n\nexport function showMessagesHistory(len : number) {\n    const template : string | null = localStorage.getItem(\"messagesHistory\");\n    const messages : any = tryParse(template!);\n    const lenOfMsg : number = messages.length - 1;\n    for (let i : number = lenOfMsg - len; i > lenOfMsg - len - 20; i--) {\n        let messageWindow = createMessage(messages[i]);\n        UI.CHAT_WINDOW.prepend(messageWindow); \n        UI.CHAT.scrollTop += messageWindow.clientHeight - 48;\n    }\n}\n\nexport function checkAutoriztion() : boolean {\n    const email : string | undefined = Cookies.get(\"email\");\n    const token : string | undefined = Cookies.get(\"token\");\n    const name : string | undefined = Cookies.get(\"myName\");\n    if (!email) {\n        alert(\"Пожалуйста авторизуйтесь\");\n        return false;\n    }\n    else if (!token) {\n        alert(\"Пожалуйста введите токен\");\n        return false;\n    }\n    else if (!name) {\n        alert(\"Пожалуйста введите имя в настройках\");\n        return false;\n    }\n    const socket = new Socket();\n    socket.listener();\n    return true;\n}\n\nexport function isAutorized() : boolean {\n    const token : string | undefined = Cookies.get(\"token\");\n    if (!token) {\n        UI.EXIT_BUTTON.textContent = \"Войти\";\n        return false;\n    }\n    else {\n        UI.EXIT_BUTTON.textContent = \"Выйти\";\n        return true;\n    }\n} \n","import { UI, grey, white } from \"./consts\";\nimport { showMessagesHistory } from \"./view\";\nimport { checkAutoriztion } from \"./view\";\nimport { Socket } from \"./socket\";\nimport { isAutorized } from \"./view\";\n\n\nexport class Chat {\n    input : HTMLInputElement;\n    send : HTMLButtonElement;\n    chatScroll : HTMLDivElement;\n    chat : HTMLDivElement;\n    \n    constructor () {\n        this.input = UI.SEND_TEXT;\n        this.send = UI.SEND_BUTTON;\n        this.chatScroll = UI.CHAT;\n        this.chat = UI.CHAT_WINDOW;\n    }\n    public listener() {\n        isAutorized();\n        const socket = new Socket();\n        this.send.addEventListener(\"click\", () => {\n            if (UI.SEND_TEXT.value && checkAutoriztion()) {\n                socket.sendMessage(UI.SEND_TEXT.value);\n            }\n            UI.SEND_TEXT.value = \"\";\n        });\n\n        let counter : number = 0;\n        this.chatScroll.addEventListener(\"scroll\", () => {\n            if (UI.CHAT.scrollTop === 0) {\n                counter++;\n                showMessagesHistory(20 * counter);\n            }\n        });\n    }\n    public showModal (show : HTMLBodyElement) : void {\n        UI.CONTAINER.style.display = \"none\";\n        show.style.display = \"block\";\n        document.body.style.background = grey;\n    }\n    public hideModal (hide : HTMLBodyElement) : void {\n        UI.CONTAINER.style.display = \"flex\";\n        hide.style.display = \"none\";\n        document.body.style.background = white;\n    }\n        \n}\n\n","import { isAutorized}  from \"./view\";\nimport { Socket } from \"./socket\";\nimport { receiveMessages } from \"./requests\";\nimport { Autorization, Settings, Confirmation} from \"./modalInterface\"\nimport { Chat } from \"./mainInterface\";\n\nconst confirmation = new Confirmation();\nconst settings = new Settings();\nconst autorization = new Autorization();\nconst chat = new Chat();\n\ndocument.addEventListener(\"DOMContentLoaded\", () => { \n    chat.listener();\n    autorization.listener();\n    settings.listener();\n    confirmation.listener();\n    receiveMessages();\n    if (isAutorized()) {\n        const socket = new Socket();\n        socket.listener();\n    }\n})\n","import { isAutorized} from \"./view\";\nimport { UI } from \"./consts\";\nimport { deleteCookie } from \"./utils\";\nimport Cookies from \"js-cookie\";\nimport {sendEmail} from \"./requests\"\nimport { Chat } from \"./mainInterface\";\nimport { getResponse } from \"./requests\";\n\n\nexport class Autorization {\n    mainButton: HTMLButtonElement;\n    window : HTMLBodyElement;\n    sendButton : HTMLButtonElement;\n    exitButton : HTMLButtonElement;\n    toConfirmation : HTMLLinkElement;\n    input : HTMLInputElement;\n\n    constructor () {\n        this.mainButton = UI.EXIT_BUTTON;\n        this.window = UI.MODAL_AUTORIZATION;\n        this.sendButton = UI.MODAL.AUTORIZATION.SEND_BUTTON;\n        this.exitButton = UI.MODAL.AUTORIZATION.EXIT;\n        this.toConfirmation = UI.ENTER_CODE;\n        this.input = UI.MODAL.AUTORIZATION.TEXT\n    }\n   \n    public listener () {\n        const chat = new Chat();\n        this.sendButton.addEventListener(\"click\", () => {\n            if (UI.MODAL.AUTORIZATION.TEXT.value.includes(\"@\")){\n                const email : string = UI.MODAL.AUTORIZATION.TEXT.value;\n                Cookies.set(\"email\", email)\n                chat.hideModal(UI.MODAL_AUTORIZATION);\n                chat.showModal(UI.MODAL_CONFIRMATION);\n                sendEmail(email);\n                UI.MODAL.AUTORIZATION.TEXT.value = \"\";\n                alert(\"Проверьте спам\")\n            }\n            else {\n                alert(\"Введите корректный email\");\n            }\n        });\n\n        this.mainButton.addEventListener(\"click\", () => {\n            if (isAutorized()) {\n                deleteCookie();\n                this.mainButton.textContent = \"Войти\";\n            }\n            chat.showModal(UI.MODAL_AUTORIZATION);\n        });\n\n        this.exitButton.addEventListener(\"click\", () => chat.hideModal(UI.MODAL_AUTORIZATION));\n\n        this.toConfirmation.addEventListener(\"click\",  () => {\n            chat.hideModal(UI.MODAL_AUTORIZATION);\n            chat.showModal(UI.MODAL_CONFIRMATION);\n        });\n    }\n}\n\nexport class Confirmation {\n    window : HTMLBodyElement;\n    sendButton : HTMLButtonElement;\n    exitButton : HTMLButtonElement;\n    input : HTMLInputElement;\n    constructor () {\n        this.window = UI.MODAL_CONFIRMATION;\n        this.sendButton = UI.MODAL.CONFIRMATION.SEND_BUTTON;\n        this.exitButton = UI.MODAL.CONFIRMATION.EXIT;\n        this.input = UI.MODAL.CONFIRMATION.TEXT;\n    }\n    public listener () {\n        const chat = new Chat();\n        this.sendButton.addEventListener(\"click\", () => {\n            if (UI.MODAL.CONFIRMATION.TEXT.value) {\n                const token : string = UI.MODAL.CONFIRMATION.TEXT.value;\n                Cookies.set(\"token\", token);\n                chat.hideModal(UI.MODAL_CONFIRMATION);\n                chat.showModal(UI.MODAL_SETTINGS);\n            }\n            else {\n                alert(\"Введите токен\");\n            }\n            UI.MODAL.CONFIRMATION.TEXT.value = \"\";\n        });\n        this.exitButton.addEventListener(\"click\", () => chat.hideModal(UI.MODAL_CONFIRMATION));\n    }\n}\n\nexport class Settings {\n    mainButton: HTMLButtonElement;\n    window : HTMLBodyElement;\n    sendButton : HTMLButtonElement;\n    exitButton : HTMLButtonElement;\n    input : HTMLInputElement;\n    constructor() {\n        this.mainButton = UI.SETTINGS_BUTTON;\n        this.window = UI.MODAL_SETTINGS;\n        this.sendButton = UI.MODAL.SETTINGS.SEND_BUTTON;\n        this.exitButton = UI.MODAL.SETTINGS.EXIT;\n        this.input = UI.MODAL.SETTINGS.TEXT;\n    }\n    public listener() {\n        const chat = new Chat();\n        UI.MODAL.SETTINGS.SEND_BUTTON.addEventListener(\"click\", () => {\n            if (UI.MODAL.SETTINGS.TEXT.value) {\n                const name : string = UI.MODAL.SETTINGS.TEXT.value;\n                Cookies.set(\"myName\", name);\n                chat.hideModal(UI.MODAL_SETTINGS);\n                getResponse(name);\n                document.location.reload();\n            }\n            else {\n                alert(\"Введите имя\");\n            }\n            UI.MODAL.SETTINGS.TEXT.value = \"\";\n        });\n        this.mainButton.addEventListener(\"click\", () => chat.showModal(UI.MODAL_SETTINGS));\n        this.exitButton.addEventListener(\"click\", () => chat.hideModal(UI.MODAL_SETTINGS));\n    }\n}\n","import Cookies from 'js-cookie';\nimport { showMessagesHistory } from './view';\nimport { UI } from \"./consts\"\nimport { tryStringify } from './utils';\n\nexport async function getResponse (myName : string) : Promise<void> {\n    const json : string | null = tryStringify({ name: myName });\n    const token : string | undefined = Cookies.get(\"token\");\n    try {\n        fetch(UI.USER_API, {\n            method: 'PATCH',\n            headers: {\n                'Authorization': `Bearer ${token}`,\n                'Content-Type': 'application/json;charset=utf-8'\n            },\n            body: json,\n        });\n    }\n    catch (error : any) {\n        alert(\"Error \" + error.name + ':' + error.message + '\\n' + error.stack);\n    }\n}\n\nexport async function sendEmail(eMail : string) : Promise<void> {\n    const json : string | null = tryStringify({ email: eMail });\n    try {\n        fetch(UI.USER_API, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json;charset=utf-8'\n            },\n            body: json,\n        });\n    }\n    catch (error : any) {\n        alert(\"Error \" + error.name + ':' + error.message + '\\n' + error.stack);\n    }\n};\n\nexport async function receiveMessages() : Promise<void> {\n    try {\n        const response : Response = await fetch(UI.MESSAGES_API, {\n            method: 'GET',\n            headers: {\n                'Content-Type': 'application/json;'\n            }\n        });\n        const json : any =  await response.json();\n        const messagesHistory : string | null = tryStringify(json.messages);\n        localStorage.setItem(\"messagesHistory\", `${messagesHistory}`);\n        showMessagesHistory(0);\n        UI.CHAT.scrollTop += 10000;\n        UI.PRELOADER.style.display = \"none\";\n    }\n    catch(error : any) {\n        alert(\"Error \" + error.name + ':' + error.message + '\\n' + error.stack);\n    }\n} "],"names":["$41988313967db223$export$cef5c86d8ac84400","obj","JSON","stringify","error","alert","name","message","stack","$41988313967db223$export$468ff95b83d315e5","parse","$666bc8f27f76152a$exports","assign","target","i","arguments","length","source","key","init","converter1","defaultAttributes","set","value","attributes","document","expires","Date","now","toUTCString","encodeURIComponent","replace","decodeURIComponent","escape","stringifiedAttributes","attributeName","split","cookie","write","get","cookies","jar","parts","slice","join","foundKey","read","e","Object","create","remove","withAttributes","this","converter","withConverter","freeze","path","factory","$f2f748da24448b94$export$4b08aed5f1ec6952","PRELOADER","querySelector","CONTAINER","SETTINGS_BUTTON","EXIT_BUTTON","ENTER_CODE","SEND_TEXT","SEND_BUTTON","CHAT","CHAT_WINDOW","TEMPLATE","MODAL","SETTINGS","TEXT","EXIT","AUTORIZATION","CONFIRMATION","MODAL_SETTINGS","MODAL_AUTORIZATION","MODAL_CONFIRMATION","USER_API","MESSAGES_API","SERVER_API","$13c9188fae728785$export$4798917dbf149b79","constructor","token","$parcel$interopDefault","socket","WebSocket","listener","addEventListener","event","addMessage","sendMessage","send","text","messageData","data","append","$be87d6e3ad06333a$export$62651879628e0c4c","scrollTop","formValue","user","date","createdAt","email","$be87d6e3ad06333a$export$5441ca21932cfac5","createElement","classList","add","content","cloneNode","firstElementChild","textContent","lastElementChild","String","$be87d6e3ad06333a$export$7406b3cd41808527","len","messages","localStorage","getItem","lenOfMsg","messageWindow","prepend","clientHeight","$be87d6e3ad06333a$export$801ef38e4bccc49","$7cebb02732ba3e99$export$d49dffca20dba6f7","input","chatScroll","chat","$be87d6e3ad06333a$export$9b1072ed0b6e2e51","counter","showModal","show","style","display","body","background","hideModal","hide","$466562b14351ffcb$var$confirmation","window","sendButton","exitButton","$466562b14351ffcb$var$settings","mainButton","async","myName","json","fetch","method","headers","Authorization","$becf98ab0a789c0a$export$fd3c80c00b3490e","location","reload","$466562b14351ffcb$var$autorization","toConfirmation","includes","eMail","$becf98ab0a789c0a$export$1cea2e25b75a88f2","$466562b14351ffcb$var$chat","response","messagesHistory","setItem","$becf98ab0a789c0a$export$da14a1c628a4ac5c"],"version":3,"file":"index.a88292cb.js.map"}